<!----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
---------------------------------------------------------------------  Développement de l'espace de discussion  --------------------------------------------------------------------------------
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------>



<!----------------------------------------------------------------------------------------------------
---------------------  Dernier Message avant l'affichage du formulaire  -----------------------
----------------------------------------------------------------------------------------------------->
<div class="container-fluid headerChat mb-4">
    <div class="avatarSeet" [@opacityAnimation]>
        <img src="../../assets/Empty-ressources/Sources/Avatar Seet/Avatar SEET.png" alt="Avatar SEET"
            class="avatarSeet mt-4">
    </div>
    <h1 class="fs-1">Bienvenue !</h1>
    <div class="avatarText">
        <p [@opacityAnimation]>Afin de générer ton site, je te prie de remplir les champs ci-dessous</p>
    </div>
</div>


<!----------------------------------------------------------------------------------------------------
--------------------------------------  Espace de discussion  --------------------------------------
----------------------------------------------------------------------------------------------------->

<div [@opacityAnimation] class="container discussionSpace my-5">
    <div class="chatLogo">
        <p class="text-center logoChat">
            <img src="../../assets/Logo noir.png" alt="Favicon Seet" class="logoNoir">
            <span>Seet</span>
        </p>
    </div>

    <div class="chat px-md-5 py-md-3">
        <div>
            <!---------------------------------------------------------------------------------------------------
            ------------------------------------- Première question ------------------------------------------
            ------------------------------------- ( Le nom du site ) -------------------------------------------
            ----------------------------------------------------------------------------------------------------->
            <div class="asked gap-sm-3">
                <img src="../../assets/Empty-ressources/Sources/Avatar Seet/IDAvatar.png" alt="IDAvatar">
                <span class="fw-bolder fs-1">.</span>
                <div class="questionBulle">
                    <!-- <div class="typing-indicator">
                        <span></span>
                        <span></span>
                        <span></span>
                      </div> -->
                    <p class="chatbotMsg" [@opacityAnimation]> Bienvenue ! Alors, quel nom veux-tu donner à ton site ?
                    </p>
                </div>
            </div>
            <!---------------------------------------------------------------------------------------------------
            ----------------------- Réponse de l'utilisateur à la première question ------------------------
            ----------------------------------------------------------------------------------------------------->
            <div class="ans gap-sm-3" *ngIf="titleSiteInter !== ''">
                <p class="userMsg"> {{ titleSiteInter }}
                    <!-- button editTitle -->
                    <button type="button" class="btnEdit" (click)="editTitle()">
                        <img class="imgEdit" src="../../assets/Empty-ressources/Sources/Icons/editer.png"
                            alt="IDAvatar">
                    </button>
                </p>
                <img src="../../assets/Empty-ressources/Sources/Avatar Seet/IDAvatar.png" class="userAvatar"
                    alt="IDAvatar">
            </div>



            <!---------------------------------------------------------------------------------------------------
            ------------------------------------- Deuxième question ------------------------------------------
            ------------------------------------- ( La catégorie ) -------------------------------------------
            ----------------------------------------------------------------------------------------------------->
            <div class="asked gap-sm-3" *ngIf="titleSiteInter !== ''">
                <img src="../../assets/Empty-ressources/Sources/Avatar Seet/IDAvatar.png" alt="IDAvatar">
                <span class="fw-bolder fs-1">.</span>
                <p class="chatbotMsg" [@opacityAnimation]> Génial ! Dans quelle catégorie veux-tu mettre ton site ? </p>
            </div>
            <!---------------------------------------------------------------------------------------------------
            ----------------------- Réponse de l'utilisateur à la deuxième question ------------------------
            ----------------------------------------------------------------------------------------------------->
            <div class="ans gap-sm-3" *ngIf="categInter !== ''">
                <p class="userMsg"> {{categInter}}
                    <!-- button editCategory -->
                    <button type="button" class="btnEdit" (click)="editCategory()">
                        <img class="imgEdit" src="../../assets/Empty-ressources/Sources/Icons/editer.png"
                            alt="IDAvatar">
                    </button>
                </p>
                <img src="../../assets/Empty-ressources/Sources/Avatar Seet/IDAvatar.png" class="userAvatar"
                    alt="IDAvatar">
            </div>




            <!---------------------------------------------------------------------------------------------------
            ------------------------------------- Troisième question -----------------------------------------
            ------------------------------------- ( Le thème ) ------------------------------------------------
            ---------------------------------------------------------------------------------------------------->
            <div class="asked gap-sm-3" *ngIf="categInter !== ''">
                <img src="../../assets/Empty-ressources/Sources/Avatar Seet/IDAvatar.png" alt="IDAvatar">
                <span class="fw-bolder fs-1">.</span>
                <p class="chatbotMsg" [@opacityAnimation]> D'accord. Dis-moi précisement de quel thème veut parler ton
                    site et qui est en rapport avec la catégorie que tu as choisie. </p>
            </div>
            <!---------------------------------------------------------------------------------------------------
            ----------------------- Réponse de l'utilisateur à la troisième question ------------------------
            ----------------------------------------------------------------------------------------------------->
            <div class="ans gap-sm-3" *ngIf="themInter !== ''">
                <p class="userMsg"> {{themInter}}
                    <!-- button editTheme -->
                    <button type="button" class="btnEdit" (click)="editTheme()">
                        <img class="imgEdit" src="../../assets/Empty-ressources/Sources/Icons/editer.png"
                            alt="IDAvatar">
                    </button>
                </p>

                <img class="userAvatar" src="../../assets/Empty-ressources/Sources/Avatar Seet/IDAvatar.png"
                    alt="IDAvatar">
            </div>



            <!---------------------------------------------------------------------------------------------------
            ------------------------------------- Quatrième question -----------------------------------------
            ---------------------------------- ( Le choix du template  ) --------------------------------------
            ---------------------------------------------------------------------------------------------------->
            <div *ngIf="themInter !== ''">
                <div class="asked gap-sm-3">
                    <img src="../../assets/Empty-ressources/Sources/Avatar Seet/IDAvatar.png" alt="IDAvatar">
                    <span class="fw-bolder fs-1">.</span>
                    <p class="chatbotMsg" [@opacityAnimation]>Veuillez choisir un template ! </p>
                </div>
                <form action="" class=" formColor" *ngIf="buttonModifTemplate === false">
                    <div class="templateBox p-3 ms-4 mt-3">
                        <div class="template">
                            <!-------------------------------------------------------------------------------
                            ------------------------------------ Template 1 -------------------------------
                            -------------------------------------------------------------------------------->
                            <div id="cass1" value="top" class="carousel slide template1" data-bs-ride="carousel">
                                <input type="radio" value="carousel-1" name="template" class="inputTemplate"
                                    (change)="choiceTemplate($event)">
                                <!-- Points au bas d'image/trois barres -->
                                <div class="carousel-indicators">
                                    <button type="button" data-bs-target="#cass1" data-bs-slide-to="0"
                                        class="active"></button>
                                    <button type="button" data-bs-target="#cass1" data-bs-slide-to="1"></button>
                                    <button type="button" data-bs-target="#cass1" data-bs-slide-to="2"></button>
                                </div>
                                <!-- Diaporama/carousel -->
                                <div class="carousel-inner">
                                    <div class="carousel-item active">
                                        <img src="../../assets/aaressources/templates/template 1/Screenshot 2023-08-04 at 14-36-21 Level HTML Template by Tooplate.png"
                                            class="d-block" style="width:100%">
                                    </div>
                                    <div class="carousel-item">
                                        <img src="../../assets/aaressources/templates/template 1/Screenshot 2023-08-04 at 14-37-28 Level HTML Template by Tooplate.png"
                                            class="d-block" style="width:100%">
                                    </div>
                                    <div class="carousel-item">
                                        <img src="../../assets/aaressources/templates/template 1/Screenshot 2023-08-04 at 14-38-44 Level HTML Template by Tooplate.png"
                                            class="d-block" style="width:100%">
                                    </div>
                                </div>
                                <!-- Touche commande droite et gauche/fleche -->
                                <button class="carousel-control-prev" type="button" data-bs-target="#cass1"
                                    data-bs-slide="prev">
                                    <span class="carousel-control-prev-icon"></span>
                                </button>
                                <button class="carousel-control-next" type="button" data-bs-target="#cass1"
                                    data-bs-slide="next">
                                    <span class="carousel-control-next-icon"></span>
                                </button>
                            </div>
                            <!-------------------------------------------------------------------------------
                            ------------------------------------ Template 2 -------------------------------
                            -------------------------------------------------------------------------------->
                            <div id="cass2" class="carousel slide template2" data-bs-ride="carousel">
                                <input type="radio" value="carousel-2" name="template" class="inputTemplate"
                                    (change)="choiceTemplate($event)">
                                <!-- Points au bas d'image/trois barres -->
                                <div class="carousel-indicators">
                                    <button type="button" data-bs-target="#cass2" data-bs-slide-to="0"
                                        class="active"></button>
                                    <button type="button" data-bs-target="#cass2" data-bs-slide-to="1"></button>
                                    <button type="button" data-bs-target="#cass2" data-bs-slide-to="2"></button>
                                </div>
                                <!-- Diaporama/carousel -->
                                <div class="carousel-inner">
                                    <div class="carousel-item active">
                                        <img src="../../assets/aaressources/templates/template 2/Screenshot 2023-08-04 at 14-44-56 Pop HTML CSS Template.png"
                                            class="d-block" style="width:100%">
                                    </div>
                                    <div class="carousel-item">
                                        <img src="../../assets/aaressources/templates/template 2/Screenshot 2023-08-04 at 14-45-15 Pop HTML CSS Template.png"
                                            class="d-block" style="width:100%">
                                    </div>
                                    <div class="carousel-item">
                                        <img src="../../assets/aaressources/templates/template 2/Screenshot 2023-08-04 at 14-45-41 Pop HTML CSS Template.png"
                                            class="d-block" style="width:100%">
                                    </div>
                                </div>
                                <!-- Touche commande droite et gauche/fleche -->
                                <button class="carousel-control-prev" type="button" data-bs-target="#cass2"
                                    data-bs-slide="prev">
                                    <span class="carousel-control-prev-icon"></span>
                                </button>
                                <button class="carousel-control-next" type="button" data-bs-target="#cass2"
                                    data-bs-slide="next">
                                    <span class="carousel-control-next-icon"></span>
                                </button>
                            </div>
                            <!-------------------------------------------------------------------------------
                            ------------------------------------ Template 3 -------------------------------
                            -------------------------------------------------------------------------------->
                            <div id="cass4" class="carousel slide template3" data-bs-ride="carousel">
                                <input type="radio" value="carousel-3" name="template" class="inputTemplate"
                                    (change)="choiceTemplate($event)">
                                <!-- Points au bas d'image/trois barres -->
                                <div class="carousel-indicators">
                                    <button type="button" data-bs-target="#cass4" data-bs-slide-to="0"
                                        class="active"></button>
                                    <button type="button" data-bs-target="#cass4" data-bs-slide-to="1"></button>
                                    <button type="button" data-bs-target="#cass4" data-bs-slide-to="2"></button>
                                </div>
                                <!-- Diaporama/carousel -->
                                <div class="carousel-inner">
                                    <div class="carousel-item active">
                                        <img src="../../assets/aaressources/templates/template 4/Screenshot 2023-08-04 at 14-51-52 JobEntry - Job Portal Website Template.png"
                                            class="d-block" style="width:100%">
                                    </div>
                                    <div class="carousel-item">
                                        <img src="../../assets/aaressources/templates/template 4/Screenshot 2023-08-04 at 14-52-38 JobEntry - Job Portal Website Template.png"
                                            class="d-block" style="width:100%">
                                    </div>
                                    <div class="carousel-item">
                                        <img src="../../assets/aaressources/templates/template 4/Screenshot 2023-08-04 at 14-52-55 JobEntry - Job Portal Website Template.png"
                                            class="d-block" style="width:100%">
                                    </div>
                                </div>
                                <!-- Touche commande droite et gauche/fleche -->
                                <button class="carousel-control-prev" type="button" data-bs-target="#cass4"
                                    data-bs-slide="prev">
                                    <span class="carousel-control-prev-icon"></span>
                                </button>
                                <button class="carousel-control-next" type="button" data-bs-target="#cass4"
                                    data-bs-slide="next">
                                    <span class="carousel-control-next-icon"></span>
                                </button>
                            </div>

                        </div>
                        <div class="indiceTemplate">
                            <div><span class="btn t1">1</span></div>
                            <div><span class="btn t2">2</span></div>
                            <div><span class="btn t3">3</span></div>
                        </div>
                    </div>
                </form>
            </div>
            <!---------------------------------------------------------------------------------------------------
                ----------------------- Réponse de l'utilisateur à la Quatrième question ------------------------
                 ----------------------------------------------------------------------------------------------------->
            <div class="ans gap-sm-3 mt-3" *ngIf="template !== ''">
                <p class="userMsg">
                    <strong>Choix du template:</strong> {{template}}
                    <!-- button editTemplate -->
                    <button type="button" class="modifColor" *ngIf="buttonModifTemplate === true" (click)="editTemplate()">
                        <img class="userAvatar" src="../../assets/Empty-ressources/Sources/Icons/editer.png"
                            alt="IDAvatar">
                    </button>
                </p>
                <img class="userAvatar" src="../../assets/Empty-ressources/Sources/Avatar Seet/IDAvatar.png"
                    alt="IDAvatar">
            </div>

            <!-- question choix des couleurs (facultatif) -->
            <div class="asked gap-sm-3" *ngIf="template !== ''">
                <img src="../../assets/Empty-ressources/Sources/Avatar Seet/IDAvatar.png" alt="IDAvatar">
                <span class="fw-bolder fs-1">.</span>
                <div class="divParaColor">
                    <p class=" borde" [@opacityAnimation]>Voulez-vous Choisir une palette de couleurs pour votre site ?
                        <button type="button" class="acceptColor" (click)="acceptColor()">Oui</button>
                        <button type="button" class="noColor" (click)="noColor()">Non
                        </button>
                    </p>
                    <div *ngIf="buttonValider === true">
                        <form [formGroup]="profileForm" (ngSubmit)="validerColor()" class=" formColor">
                            <div class="divColor">
                                <!-- Choix de la couleur primaire du site -->
                                <div>
                                    <label for="">Primaire</label>
                                    <input id="primaryColor" type="color" formControlName="primaryColor">
                                </div>

                                <!-- Choix de la couleur secondaire du site -->
                                <div>
                                    <label for="">Secondaire</label>

                                    <input id="secondaryColor" type="color" formControlName="secondaryColor">
                                </div>

                                <!-- Choix de la couleur tertiaire du site -->
                                <div>
                                    <label for="">Tertiaire</label>

                                    <input id="tertiaryColor" type="color" formControlName="tertiaryColor">
                                </div>
                            </div>
                            <div class="buttonValAn">
                                <button type="button" class="validColor" (click)="validerColor()">Valider</button>
                                <button type="button" class="annulerColor" (click)="annulerColor()">Annuler</button>
                            </div>

                        </form>
                    </div>
                </div>
            </div>
            <!----------------------------------------------------------------------------------------------------
                 ----------------------- Réponse de l'utilisateur à la cinquième question ------------------------
                 ----------------------------------------------------------------------------------------------------->

            <!------- (Si il décide d'opérer un choix pour la couleur primaire, secondaire, tertiaire) -------->
            <div class="ans gap-sm-3" *ngIf="colorChoice === true && template !== ''">
                <div class="divColorAns" *ngIf="pColor !== '' || sColor !== '' || tColor !== ''">
                    <p class="userMsg"> Alors, voici les couleurs que tu as choisies.
                        <button *ngIf="buttonModif === true" type="button" class="modifColor" (click)="modifColor()">
                            <img class="userAvatar" src="../../assets/Empty-ressources/Sources/Icons/editer.png"
                                alt="IDAvatar">
                        </button>
                    </p>
                    <div>
                        <p class="colorAns" [style.backgroundColor]="pColor"></p>
                        <p class="colorAns" [style.backgroundColor]="sColor"></p>
                        <p class="colorAns" [style.backgroundColor]="tColor"></p>
                    </div>
                </div>
                <span class="fw-bolder fs-1">.</span>
                <img src="../../assets/Empty-ressources/Sources/Avatar Seet/IDAvatar.png" alt="IDAvatar">
            </div>

            <!-------------------------------- (Si il décide de ne pas opérer de choix ) ------------------------------->
            <div class="ans gap-sm-3" *ngIf="noColorChoice === true && template !== ''">
                <p class="userMsg"> Vous n'avez choisit aucune couleur
                    <button *ngIf="buttonModif === true" type="button" class="modifColor" (click)="modifColor()">
                        <img class="userAvatar" src="../../assets/Empty-ressources/Sources/Icons/editer.png"
                            alt="IDAvatar">
                    </button>
                </p>
                <img class="userAvatar" src="../../assets/Empty-ressources/Sources/Avatar Seet/IDAvatar.png"
                    alt="IDAvatar">
            </div>

            <!---------------------------------------------------------------------------------------------------
            ------------------------------------- Sixième question -----------------------------------------
            ---------------------------------- ( Message de félicitation ) --------------------------------------
            ---------------------------------------------------------------------------------------------------->
            <div class="asked gap-sm-3" *ngIf="congratulation === true && buttonModif === true && template !== '' && buttonModifTemplate === true">
                <img src="../../assets/Empty-ressources/Sources/Avatar Seet/IDAvatar.png" alt="IDAvatar">
                <span class="fw-bolder fs-1">.</span>
                <p class="chatbotMsg" [@opacityAnimation]> Génial ! Génial, ton template vient d'être généré.
                    Maintenant, pour recevoir ton
                    template, remplis le formulaire ci-contre</p>
            </div>
        </div>

        <div class="btnContinue" *ngIf="btnContinue === true">
            <button class="continueBtn">Continuer</button>
        </div>
    </div>

    <!---------------------------------------------------------------------------------------------------
    --------------- Affichage des champs du formulaire en fonction des questions --------------
    ---------------------------------------------------------------------------------------------------->
    <div class="formDiv d-flex">
        <form action="" class="formQuestion" method="post" #formSearch="ngForm">
            <ng-container>
                <!-- Champ de saisit du nom de site -->
                <input *ngIf="input === true" [(ngModel)]="titleSite" type="text" name="title" id="title"
                     placeholder="Saisissez le nom de votre site ici...." required>

                <!-- Selection de la catégorie -->
                <select *ngIf="selectCat === true" id="categorie" aria-label="Large select example" name="categ"
                    [(ngModel)]="categ">
                    <option value="" disabled selected>Sélectionne une catégorie dans la liste suivante
                    </option>
                    <option [value]="categorie.titre" *ngFor="let categorie of categories"> {{categorie.titre}}
                    </option>
                </select>

                <!-- Champ de saisir du thème -->
                <input *ngIf="inputThem === true" [(ngModel)]="them" type="text" name="them" id="them"
                     placeholder="Saisissez votre thème ici...." required>
            </ng-container>
        </form>

        <!-- Button d'envoi des réponses -->
        <button *ngIf="buttonSendMsg === true" type="button" style="width: 5%;" class="sendMsg" (click)="sendAns()">
            <svg xmlns="http://www.w3.org/2000/svg" width="45px" style="background-color: #B2CC12; border: none;"
                fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="">
                <path stroke-linecap="round" stroke-linejoin="round"
                    d="M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5" />
            </svg>
        </button>
    </div>

    <!-- MODIFICATION -->
    <div class="formDiv d-flex">
        <form action="" class="formQuestion" method="post" #formSearch="ngForm">
            <ng-container>
                <!-- Champ de saisit du nom de site -->
                <input *ngIf="inputModif === true" [(ngModel)]="titleSite" type="text" name="title" id="title"
                     placeholder="Saisissez le nom de votre site ici...." required>

                <!-- Selection de la catégorie -->
                <select *ngIf="selectCatModif === true" id="categorie" aria-label="Large select example" name="categ"
                    [(ngModel)]="categ">
                    <option value="" disabled selected>Sélectionne une catégorie dans la liste suivante
                    </option>
                    <option [value]="categorie.titre" *ngFor="let categorie of categories"> {{categorie.titre}}
                    </option>
                </select>

                <!-- Champ de saisir du thème -->
                <input *ngIf="inputThemModif === true" [(ngModel)]="them" type="text" name="them" id="them"
                     placeholder="Saisissez votre thème ici...." required>
            </ng-container>
        </form>

        <!-- button de modification -->
        <button *ngIf="buttonModifMsg === true" type="button" style="width: 5%;" class="sendMsg" (click)="sendModif()">
            <svg xmlns="http://www.w3.org/2000/svg" width="45px" style="background-color: #B2CC12; border: none;"
                fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="">
                <path stroke-linecap="round" stroke-linejoin="round"
                    d="M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5" />
            </svg>
        </button>
    </div>
</div>


<!-- Cette partie de l'application s'affiche uniquement si l'utilisateur a fini de répondre à toutes les questions. 
    Il doit soumettre le formulaire pour recevoir le code source du site qui a été généré en fonction des informations fournies -->

<!-------------------------------- Page de contact ------------------------------------------>
<div class="parentForm" *ngIf="formContact === true">
    <div [@opacityAnimation] class="myform">
        <div class="avatarSeetForm">
            <img src="../../assets/Empty-ressources/Sources/Avatar Seet/Avatar SEET.png" alt="Avatar SEET" width="250">
            <p><strong>Remplis ce formulaire et reçois <br> ton site web...</strong></p>
        </div>
        <!------------ Formulaire à remplir pour recevoir le site générer  ----------->

        <div class="formul my-4">
            <form action="" class="formContact" #formContact="ngForm" (ngSubmit)="onSumbit()">
                <fieldset>
                    <div class="pt-logo"><span class="favIcon"><img src="../../assets/Logo noir.png" alt="Logo Seet"
                                width="20"> Seet</span></div>
                    <input type="text" id="fname" placeholder="Votre nom" [(ngModel)]="lname" name="lname">
                    <br><br>
                    <input type="text" id="lname" placeholder="Votre prénom " [(ngModel)]="fname" name="fname">
                    <br><br>
                    <input type="email" id="mail" placeholder="Adresse email..." [(ngModel)]="email" name="email">
                    <br> <br>
                    <button type="submit" class="validate">Valider</button>
                </fieldset>
            </form>

        </div>
        
        <button class="closeBtn" (click)="retour()">
            <span class="fas  fa-arrow-alt-circle-left"></span>
            <span> Retour</span>
        </button>
    </div>
</div>

<style>
    .myform button.closeBtn {
    position: absolute;
    top: 1rem;
    left: 2rem;
    font-size: 1.5rem;
    z-index: 105;
    background-color: transparent;
    padding: .5rem;
    font-weight: 900;
    border-radius: 50%;
    color: #B2CC12;
    border: none;
    transition: all 0.4s;
}

.myform button.closeBtn:hover{
    /* background-color: #333; */
    color: #D7D6DC;
}
</style>